<?php
 class Affiliates_Admin_Menu_WordPress { const IXAP174 = 'aff-admin-menu'; const IXAP280 = 'aff-settings'; public static function init() { add_action( 'affiliates_admin_menu', array( __CLASS__, 'affiliates_admin_menu' ) ); add_action( 'affiliates_admin_menu', array( __CLASS__, 'affiliates_admin_menu_sort' ), 999 ); } public static function affiliates_admin_menu() { global $submenu; $IXAP281 = get_post_type_object( 'affiliates_banner' ); $IXAP19 = add_submenu_page( 'affiliates-admin', $IXAP281->labels->name, $IXAP281->labels->all_items, $IXAP281->cap->edit_posts, "edit.php?post_type=affiliates_banner" ); $IXAP18[] = $IXAP19; $IXAP19 = add_submenu_page( 'affiliates-admin', __( 'Settings', AFFILIATES_PRO_PLUGIN_DOMAIN ), __( 'Settings', AFFILIATES_PRO_PLUGIN_DOMAIN ), AFFILIATES_ADMINISTER_OPTIONS, 'affiliates-admin-settings', array( __CLASS__, 'affiliates_admin_settings' ) ); $IXAP18[] = $IXAP19; add_action( 'admin_print_styles-' . $IXAP19, 'affiliates_admin_print_styles' ); add_action( 'admin_print_scripts-' . $IXAP19, 'affiliates_admin_print_scripts' ); add_action( 'admin_print_styles-' . $IXAP19, 'affiliates_pro_admin_print_styles' ); add_action( 'admin_print_scripts-' . $IXAP19, 'affiliates_pro_admin_print_scripts' ); $IXAP19 = add_submenu_page( 'affiliates-admin', __( 'Notifications', AFFILIATES_PRO_PLUGIN_DOMAIN ), __( 'Notifications', AFFILIATES_PRO_PLUGIN_DOMAIN ), AFFILIATES_ADMINISTER_OPTIONS, 'affiliates-admin-notifications', array( __CLASS__, 'affiliates_admin_notifications' ) ); $IXAP18[] = $IXAP19; add_action( 'admin_print_styles-' . $IXAP19, 'affiliates_admin_print_styles' ); add_action( 'admin_print_scripts-' . $IXAP19, 'affiliates_admin_print_scripts' ); add_action( 'admin_print_styles-' . $IXAP19, 'affiliates_pro_admin_print_styles' ); add_action( 'admin_print_scripts-' . $IXAP19, 'affiliates_pro_admin_print_scripts' ); add_action( 'load-' . $IXAP19, array( __CLASS__, 'load_page' ) ); $IXAP19 = add_submenu_page( 'affiliates-admin', __( 'Totals', AFFILIATES_PRO_PLUGIN_DOMAIN ), __( 'Totals', AFFILIATES_PRO_PLUGIN_DOMAIN ), AFFILIATES_ADMINISTER_OPTIONS, 'affiliates-admin-totals', array( 'Affiliates_Totals_WordPress', 'view' ) ); $IXAP18[] = $IXAP19; add_action( 'admin_print_styles-' . $IXAP19, 'affiliates_admin_print_styles' ); add_action( 'admin_print_scripts-' . $IXAP19, 'affiliates_admin_print_scripts' ); add_action( 'admin_print_styles-' . $IXAP19, 'affiliates_pro_admin_print_styles' ); add_action( 'admin_print_scripts-' . $IXAP19, 'affiliates_pro_admin_print_scripts' ); } public static function affiliates_admin_menu_sort() { global $submenu; if ( isset( $submenu['affiliates-admin'] )) { usort($submenu['affiliates-admin'], array( __CLASS__, 'menu_sort' ) ); } } public static function menu_sort( $IXAP282, $IXAP283 ) { global $submenu; $IXAP15 = 0; $IXAP284 = array( 'affiliates-admin' => 0, 'affiliates-admin-affiliates' => 1, 'affiliates-admin-hits' => 2, 'affiliates-admin-hits-affiliate' => 3, 'affiliates-admin-referrals' => 4, 'affiliates-admin-options' => 100, 'affiliates-admin-user-registration' => 1000, 'edit.php?post_type=affiliates_banner' => 50, 'affiliates-admin-settings' => 200, 'affiliates-admin-notifications' => 300, 'affiliates-admin-totals' => 10, 'affiliates-admin-tiers' => 2000, 'affiliates-admin-add-ons' => 9999 ); if ( isset( $IXAP282[2] ) && isset( $IXAP283[2] ) ) { if ( isset( $IXAP284[$IXAP282[2]] ) && isset( $IXAP284[$IXAP283[2]] ) ) { $IXAP15 = $IXAP284[$IXAP282[2]] - $IXAP284[$IXAP283[2]]; } } return $IXAP15; } public static function affiliates_admin_settings() { if ( !current_user_can( AFFILIATES_ADMINISTER_OPTIONS ) ) { wp_die( __( 'Access denied.', AFFILIATES_PRO_PLUGIN_DOMAIN ) ); } $IXAP285 = Affiliates_Referral::get_referral_amount_methods(); $IXAP167 = array(); foreach ( $IXAP285 as $IXAP169 ) { if ( is_array( $IXAP169 ) ) { $IXAP129 = implode( "::", $IXAP169 ); } else { $IXAP129 = $IXAP169; } $IXAP167[$IXAP129] = $IXAP129; } $IXAP167 = array_merge( array( '' => __( 'None', AFFILIATES_PRO_PLUGIN_DOMAIN ) ), $IXAP167 ); if ( isset( $_POST['submit'] ) ) { if ( wp_verify_nonce( $_POST[self::IXAP174], self::IXAP280 ) ) { if ( !empty( $_POST[Affiliates_Referral::IXAP13] ) ) { $IXAP286 = trim( $_POST[Affiliates_Referral::IXAP13] ); if ( $IXAP286 = Affiliates_Attributes::validate_key( $IXAP286 ) ) { update_option( Affiliates_Referral::IXAP13, $IXAP286 ); } else { $IXAP286 = ''; delete_option( Affiliates_Referral::IXAP13 ); } } else { $IXAP286 = ''; delete_option( Affiliates_Referral::IXAP13 ); } if ( !empty( $_POST[Affiliates_Referral::IXAP14] ) ) { $IXAP287 = trim( $_POST[Affiliates_Referral::IXAP14] ); if ( $IXAP287 = Affiliates_Attributes::validate_value( $IXAP286, $IXAP287 ) ) { update_option( Affiliates_Referral::IXAP14, $IXAP287 ); } else { $IXAP287 = ''; delete_option( Affiliates_Referral::IXAP14 ); } } else { $IXAP287 = ''; delete_option( Affiliates_Referral::IXAP14 ); } } } $IXAP286 = get_option( Affiliates_Referral::IXAP13, '' ); $IXAP287 = get_option( Affiliates_Referral::IXAP14, '' ); echo '<div>' . '<h2>' . __( 'Settings', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h2>' . '</div>'; $IXAP288 = array_merge( array( '' => __( 'None', AFFILIATES_PRO_PLUGIN_DOMAIN ) ), Affiliates_Attributes::get_keys() ); unset( $IXAP288[Affiliates_Attributes::IXAP54] ); unset( $IXAP288[Affiliates_Attributes::IXAP82] ); $IXAP289 = '<select name="' . Affiliates_Referral::IXAP13 . '">'; foreach ( $IXAP288 as $IXAP74 => $IXAP83 ) { $IXAP272 = ( $IXAP74 == $IXAP286 ) ? ' selected="selected" ' : ''; $IXAP289 .= '<option value="' . $IXAP74 . '" ' . $IXAP272 . '>' . $IXAP83 . '</option>'; } $IXAP289 .= '</select>'; switch ( $IXAP286 ) { case Affiliates_Attributes::IXAP80 : $IXAP290 = '<select name="' . Affiliates_Referral::IXAP14 . '">'; foreach ( $IXAP167 as $IXAP74 => $IXAP129 ) { $IXAP272 = ( Affiliates_Referral::get_referral_amount_method( $IXAP74 ) == Affiliates_Referral::get_referral_amount_method( $IXAP287 ) ) ? ' selected="selected" ' : ''; $IXAP290 .= '<option value="' . $IXAP74 . '" ' . $IXAP272 . '>' . $IXAP129 . '</option>'; } $IXAP290 .= '</select>'; break; default: $IXAP290 = '<input name="' . Affiliates_Referral::IXAP14 . '" type="text" value="' . esc_attr( $IXAP287 ) . '" />'; } echo '<form action="" name="options" method="post">' . '<div>' . '<h3>' . __( 'Default referral amount calculation', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h3>' . '<p class="description">' . __( 'These settings will be used to calculate referral amounts, if no specific settings are given for an affiliate.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>' . '<p>' . '<label for="' . Affiliates_Referral::IXAP13 . '">' . __( 'Default referral calculation', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</label>' . '&nbsp;' . $IXAP289 . '</p>' . '<p>' . '<label for="' . Affiliates_Referral::IXAP14 . '">' . __( 'Default referral calculation value', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</label>' . '&nbsp;'. $IXAP290 . '</p>' . '<p>' . wp_nonce_field( self::IXAP280, self::IXAP174, true, false ) . '<input class="button" type="submit" name="submit" value="' . __( 'Save', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '"/>' . '</p>' . '</div>' . '</form>'; affiliates_footer(); } public static function affiliates_admin_totals() { } public static function affiliates_admin_notifications() { if ( !current_user_can( AFFILIATES_ADMINISTER_OPTIONS ) ) { wp_die( __( 'Access denied.', AFFILIATES_PRO_PLUGIN_DOMAIN ) ); } include_once( dirname( AFFILIATES_PRO_FILE ) . '/lib/ext/includes/class-affiliates-notifications.php' ); $IXAP291 = get_option( 'affiliates_notifications', null ); if ( $IXAP291 === null ) { add_option('affiliates_notifications', array(), null, 'no' ); } if ( isset( $_POST['submit'] ) ) { if ( wp_verify_nonce( $_POST[self::IXAP174], self::IXAP280 ) ) { $IXAP291[Affiliates_Notifications::IXAP292] = !empty( $_POST[Affiliates_Notifications::IXAP292] ); if ( !empty( $_POST[Affiliates_Notifications::IXAP293] ) ) { $IXAP291[Affiliates_Notifications::IXAP293] = wp_filter_nohtml_kses( $_POST[Affiliates_Notifications::IXAP293] ); } else { $IXAP291[Affiliates_Notifications::IXAP293] = Affiliates_Notifications::IXAP294; } if ( !empty( $_POST[Affiliates_Notifications::IXAP295] ) ) { $IXAP291[Affiliates_Notifications::IXAP295] = $_POST[Affiliates_Notifications::IXAP295]; } else { $IXAP291[Affiliates_Notifications::IXAP295] = Affiliates_Notifications::IXAP296; } $IXAP291[Affiliates_Notifications::IXAP297] = !empty( $_POST[Affiliates_Notifications::IXAP297] ); $IXAP291[Affiliates_Notifications::IXAP298] = !empty( $_POST[Affiliates_Notifications::IXAP298] ); if ( !empty( $_POST[Affiliates_Notifications::IXAP299] ) ) { if ( $IXAP300 = filter_var( $_POST[Affiliates_Notifications::IXAP299], FILTER_VALIDATE_EMAIL ) ) { $IXAP291[Affiliates_Notifications::IXAP299] = $IXAP300; } else { $IXAP291[Affiliates_Notifications::IXAP299] = ''; } } else { $IXAP291[Affiliates_Notifications::IXAP299] = ''; } $IXAP301 = array(); if ( !empty( $_POST['notify_admin_status_accepted'] ) ) { $IXAP301[] = AFFILIATES_REFERRAL_STATUS_ACCEPTED; } if ( !empty( $_POST['notify_admin_status_pending'] ) ) { $IXAP301[] = AFFILIATES_REFERRAL_STATUS_PENDING; } $IXAP291[Affiliates_Notifications::IXAP302] = $IXAP301; if ( !empty( $_POST[Affiliates_Notifications::IXAP303] ) ) { $IXAP291[Affiliates_Notifications::IXAP303] = wp_filter_nohtml_kses( $_POST[Affiliates_Notifications::IXAP303] ); } else { $IXAP291[Affiliates_Notifications::IXAP303] = Affiliates_Notifications::IXAP304; } if ( !empty( $_POST[Affiliates_Notifications::IXAP305] ) ) { $IXAP291[Affiliates_Notifications::IXAP305] = $_POST[Affiliates_Notifications::IXAP305]; } else { $IXAP291[Affiliates_Notifications::IXAP305] = Affiliates_Notifications::IXAP306; } $IXAP291[Affiliates_Notifications::IXAP307] = !empty( $_POST[Affiliates_Notifications::IXAP307] ); $IXAP308 = array(); if ( !empty( $_POST['notify_affiliate_status_accepted'] ) ) { $IXAP308[] = AFFILIATES_REFERRAL_STATUS_ACCEPTED; } if ( !empty( $_POST['notify_affiliate_status_pending'] ) ) { $IXAP308[] = AFFILIATES_REFERRAL_STATUS_PENDING; } $IXAP291[Affiliates_Notifications::IXAP309] = $IXAP308; if ( !empty( $_POST[Affiliates_Notifications::IXAP310] ) ) { $IXAP291[Affiliates_Notifications::IXAP310] = wp_filter_nohtml_kses( $_POST[Affiliates_Notifications::IXAP310] ); } else { $IXAP291[Affiliates_Notifications::IXAP310] = Affiliates_Notifications::IXAP311; } if ( !empty( $_POST[Affiliates_Notifications::MESSAGE] ) ) { $IXAP291[Affiliates_Notifications::MESSAGE] = $_POST[Affiliates_Notifications::MESSAGE]; } else { $IXAP291[Affiliates_Notifications::MESSAGE] = Affiliates_Notifications::IXAP312; } update_option( 'affiliates_notifications', $IXAP291 ); } } $IXAP313 = isset( $IXAP291[Affiliates_Notifications::IXAP292] ) ? $IXAP291[Affiliates_Notifications::IXAP292] : Affiliates_Notifications::IXAP314; $IXAP315 = isset( $IXAP291[Affiliates_Notifications::IXAP293] ) ? $IXAP291[Affiliates_Notifications::IXAP293] : Affiliates_Notifications::IXAP294; $IXAP316 = isset( $IXAP291[Affiliates_Notifications::IXAP295] ) ? $IXAP291[Affiliates_Notifications::IXAP295] : Affiliates_Notifications::IXAP296; $IXAP317 = isset( $IXAP291[Affiliates_Notifications::IXAP297] ) && $IXAP291[Affiliates_Notifications::IXAP297]; $IXAP318 = isset( $IXAP291[Affiliates_Notifications::IXAP298] ) && $IXAP291[Affiliates_Notifications::IXAP298]; $IXAP300 = isset( $IXAP291[Affiliates_Notifications::IXAP299] ) ? $IXAP291[Affiliates_Notifications::IXAP299] : ''; $IXAP301 = isset( $IXAP291[Affiliates_Notifications::IXAP302] ) ? $IXAP291[Affiliates_Notifications::IXAP302] : array( AFFILIATES_REFERRAL_STATUS_ACCEPTED ); $IXAP319 = isset( $IXAP291[Affiliates_Notifications::IXAP303] ) ? $IXAP291[Affiliates_Notifications::IXAP303] : Affiliates_Notifications::IXAP304; $IXAP320 = isset( $IXAP291[Affiliates_Notifications::IXAP305] ) ? $IXAP291[Affiliates_Notifications::IXAP305] : Affiliates_Notifications::IXAP306; $IXAP321 = isset( $IXAP291[Affiliates_Notifications::IXAP307] ) && $IXAP291[Affiliates_Notifications::IXAP307]; $IXAP308 = isset( $IXAP291[Affiliates_Notifications::IXAP309] ) ? $IXAP291[Affiliates_Notifications::IXAP309] : array( AFFILIATES_REFERRAL_STATUS_ACCEPTED ); $IXAP322 = isset( $IXAP291[Affiliates_Notifications::IXAP310] ) ? $IXAP291[Affiliates_Notifications::IXAP310] : Affiliates_Notifications::IXAP311; $message = isset( $IXAP291[Affiliates_Notifications::MESSAGE] ) ? $IXAP291[Affiliates_Notifications::MESSAGE] : Affiliates_Notifications::IXAP312; echo '<div class="notifications">'; echo '<div class="manage">'; echo '<h1>' . __( 'Notifications', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h1>'; echo '<p>' . __( 'Notifications for the site administrator and affiliates can be enabled here. If the integration used provides its own notification settings, enable these through the integration&rsquo;s settings or here. Do not enable them both, as that could cause duplicate notifications to be sent.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>'; echo '<form action="" name="notifications" method="post">' . '<div>' . '<input class="button button-primary" type="submit" name="submit" value="' . __( 'Save', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '"/>' . '<h2>' . __( 'Affiliate Registration', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h2>' . '<h3>' . __( 'Enable registration notifications', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h3>' . '<p>' . '<label>' . '<input type="checkbox" name="' . Affiliates_Notifications::IXAP292 . '" id="' . Affiliates_Notifications::IXAP292 . '" ' . ( $IXAP313 ? ' checked="checked" ' : '' ) . '/>' . __( 'Enable registration emails', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</label>' . '</p>' . '<p class="description">' . __( 'Send new affiliates an email when their user account is created.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . ' ' . __( 'This should normally be enabled, so that new affiliates receives their username and password to be able to log in and access their account.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>' . '<p>' . '<label>' . __( 'Subject', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<br/>' . '<input class="' . Affiliates_Notifications::IXAP293 . '" name="' . Affiliates_Notifications::IXAP293 . '" type="text" value="' . esc_attr( stripslashes( $IXAP315 ) ) . '" />' . '</label>' . '</p>' . '<p>' . '<label> ' . __( 'Message', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<br/>' . '<textarea class="' . Affiliates_Notifications::IXAP295 . '" id="' . Affiliates_Notifications::IXAP295 . '" name="' . Affiliates_Notifications::IXAP295 . '" rows="10">' . htmlentities( stripslashes( $IXAP316 ), ENT_COMPAT, get_bloginfo( 'charset' ) ) . '</textarea>' . '</label>' . '</p>' . '<h2>' . __( 'Referral Notifications', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h2>' . '<h3>' . __( 'Enable notifications', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h3>' . '<p>' . '<label>' . '<input type="checkbox" name="' . Affiliates_Notifications::IXAP297 . '" id="' . Affiliates_Notifications::IXAP297 . '" ' . ( $IXAP317 ? ' checked="checked" ' : '' ) . '/>' . __( 'Enable notifications', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</label>' . '</p>' . '<p class="description">' . __( 'Notifications will only be sent if this option is activated.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>' . '<h3>' . __( 'Administrator notifications', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h3>' . '<p>' . '<label>' . '<input type="checkbox" name="' . Affiliates_Notifications::IXAP298 . '" id="' . Affiliates_Notifications::IXAP298 . '" ' . ( $IXAP318 ? ' checked="checked" ' : '' ) . '/>' . __( 'Notify the site administrator', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</label>' . '</p>' . '<p class="description">' . __( 'Notifications will be sent to the email address specified in <em>Settings > General</em>, or if indicated, to the email address specified here.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>' . '<p>' . '<label>' . __( 'Administrator Email Address', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<br/>' . sprintf( '<input class="%s" name="%s" type="text" value="%s" placeholder="%s"/>', esc_attr( Affiliates_Notifications::IXAP299 ), esc_attr( Affiliates_Notifications::IXAP299 ), esc_attr( $IXAP300 ), get_bloginfo( 'admin_email' ) ) . '</label>' . '</p>' . '<p>' . __( 'Notify when a referral is: ', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<label>' . sprintf( '<input type="checkbox" name="notify_admin_status_accepted" %s />', in_array( AFFILIATES_REFERRAL_STATUS_ACCEPTED, $IXAP301 ) ? ' checked="checked" ' : '' ) . __( 'Accepted', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</label>' . ' ' . '<label>' . sprintf( '<input type="checkbox" name="notify_admin_status_pending" %s />', in_array( AFFILIATES_REFERRAL_STATUS_PENDING, $IXAP301 ) ? ' checked="checked" ' : '' ) . __( 'Pending', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</label>' . '</p>' . '<ul class="description">' . '<li>' . __( 'Notifications on referral status updates are only sent when the status changes from <em>pending</em> to <em>accepted</em>.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li>' . __( 'More than one notification may be sent if multiple statuses are enabled.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li>' . __( 'Notifications on referral status updates may not be supported by all integrations.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '</ul>' . '<p>' . '<label>' . __( 'Subject', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<br/>' . '<input class="' . Affiliates_Notifications::IXAP303 . '" name="' . Affiliates_Notifications::IXAP303 . '" type="text" value="' . esc_attr( stripslashes( $IXAP319 ) ) . '" />' . '</label>' . '</p>' . '<p>' . '<label> ' . __( 'Message', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<br/>' . '<textarea class="message" id="' . Affiliates_Notifications::IXAP305 . '" name="' . Affiliates_Notifications::IXAP305 . '" rows="10">' . htmlentities( stripslashes( $IXAP320 ), ENT_COMPAT, get_bloginfo( 'charset' ) ) . '</textarea>' . '</label>' . '</p>' . '<h3>' . __( 'Affiliate notifications', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h3>' . '<p>' . '<label>' . '<input type="checkbox" name="' . Affiliates_Notifications::IXAP307 . '" id="' . Affiliates_Notifications::IXAP307 . '" ' . ( $IXAP321 ? ' checked="checked" ' : '' ) . '/>' . __( 'Notify the affiliates', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</label>' . '</p>' . '<p class="description">' . __( 'Notifications will be sent to affiliates when credited with a referral.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>' . '<p>' . __( 'Notify when a referral is: ', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<label>' . sprintf( '<input type="checkbox" name="notify_affiliate_status_accepted" %s />', in_array( AFFILIATES_REFERRAL_STATUS_ACCEPTED, $IXAP308 ) ? ' checked="checked" ' : '' ) . __( 'Accepted', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</label>' . ' ' . '<label>' . sprintf( '<input type="checkbox" name="notify_affiliate_status_pending" %s />', in_array( AFFILIATES_REFERRAL_STATUS_PENDING, $IXAP308 ) ? ' checked="checked" ' : '' ) . __( 'Pending', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</label>' . '</p>' . '<ul class="description">' . '<li>' . __( 'Notifications on referral status updates are only sent when the status changes from <em>pending</em> to <em>accepted</em>.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li>' . __( 'More than one notification may be sent if multiple statuses are enabled.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li>' . __( 'Notifications on referral status updates may not be supported by all integrations.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '</ul>' . '<p>' . '<label>' . __( 'Subject', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<br/>' . '<input class="' . Affiliates_Notifications::IXAP310 . '" name="' . Affiliates_Notifications::IXAP310 . '" type="text" value="' . esc_attr( stripslashes( $IXAP322 ) ) . '" />' . '</label>' . '</p>' . '<p>' . '<label> ' . __( 'Message', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<br/>' . '<textarea class="' . Affiliates_Notifications::MESSAGE . '" id="' . Affiliates_Notifications::MESSAGE . '" name="' . Affiliates_Notifications::MESSAGE . '" rows="10">' . htmlentities( stripslashes( $message ), ENT_COMPAT, get_bloginfo( 'charset' ) ) . '</textarea>' . '</label>' . '</p>' . '<p>' . wp_nonce_field( self::IXAP280, self::IXAP174, true, false ) . '<input class="button button-primary" type="submit" name="submit" value="' . __( 'Save', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '"/>' . '</p>' . '</div>' . '</form>' . '</div>'; echo '</div>'; affiliates_footer(); } public static function load_page() { $IXAP323 = get_current_screen(); if ( isset( $IXAP323->id ) ) { switch ( $IXAP323->id ) { case 'affiliates_page_affiliates-admin-notifications' : $IXAP323->add_help_tab( array( 'id' => 'affiliates-admin-notifications-affiliate-registration', 'title' => __( 'Affiliate Registration', AFFILIATES_PRO_PLUGIN_DOMAIN ) , 'content' => self::get_notifications_help_affiliate_registration() ) ); $IXAP323->add_help_tab( array( 'id' => 'affiliates-admin-notifications-referral-notifications', 'title' => __( 'Referral Notifications', AFFILIATES_PRO_PLUGIN_DOMAIN ) , 'content' => self::get_notifications_help_referral_notifications() ) ); break; } } } private static function get_notifications_help_affiliate_registration() { return '<div class="manage">' . '<h2>' . __( 'Affiliates Registration', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h2>' . '<h3>' . __( 'Message format and tokens', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h3>' . '<p class="description">' . __( 'The message format is HTML and line breaks must be indicated by <code>&lt;br/&gt;</code>.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<p class="description">' . __( 'These default tokens can be used in the subjects and the messages:', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<ul>' . '<li><code>[site_title]</code> : '. wp_specialchars_decode( get_bloginfo( 'blogname' ), ENT_QUOTES ) . '</li>' . '<li><code>[site_url]</code> : '. htmlentities( get_bloginfo( 'url' ), ENT_COMPAT, get_bloginfo( 'charset' ) ) . '</li>' . '<li><code>[site_login_url]</code> : '. htmlentities( wp_login_url(), ENT_COMPAT, get_bloginfo( 'charset' ) ) . '</li>' . '<li><code>[username]</code> : ' . __( 'The username for the new affiliate user account.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li><code>[password]</code> : '. __( 'The password for the new affiliate user account.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li><code>[user_id]</code> : '. __( 'The ID of the new affiliate user account. This is the user ID, not the affiliate ID.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li><code>[blogname]</code> : '. __( 'Same as [site_title].', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '</ul>' . '</p>' . '<h3>' . __( 'Default subject and message', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h4>' . '<p class="description">' . __( 'Subject:', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>' . '<pre>' . htmlentities( stripslashes( Affiliates_Notifications::IXAP294 ), ENT_COMPAT, get_bloginfo( 'charset' ) ) . '</pre>' . '<p class="description">' . __( 'Message:', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>' . '<pre>' . htmlentities( stripslashes( Affiliates_Notifications::IXAP296 ), ENT_COMPAT, get_bloginfo( 'charset' ) ) . '</pre>' . '</div>' . self::get_help_tab_footer(); } private static function get_notifications_help_referral_notifications() { return '<div class="manage">' . '<h3>' . __( 'Message format and tokens', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h3>' . '<p class="description">' . __( 'The message format is HTML and line breaks must be indicated by <code>&lt;br/&gt;</code>.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<p class="description">' . __( 'These default tokens can be used in the subjects and the messages:', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '<ul>' . '<li><code>[site_title]</code> : '. wp_specialchars_decode( get_bloginfo( 'blogname' ), ENT_QUOTES ) . '</li>' . '<li><code>[site_url]</code> : '. htmlentities( get_bloginfo( 'url' ), ENT_COMPAT, get_bloginfo( 'charset' ) ) . '</li>' . '<li><code>[affiliate_id]</code> : ' . __( 'The referring affiliate&rsquo;s ID', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li><code>[affiliate_email]</code> : '. __( 'The referring affiliate&rsquo;s email address', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li><code>[affiliate_name]</code> : '. __( 'The referring affiliate&rsquo;s name', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li><code>[referral_status]</code> : '. __( 'The current referral status', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li><code>[referral_amount]</code> : '. __( 'The referral amount', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li><code>[referral_currency_id]</code> : '. __( 'The referral currency ID', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li><code>[referral_type]</code> : '. __( 'The referral type (an internal reference)', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '<li><code>[referral_reference]</code> : '. __( 'The referral reference (an internal reference normally related to the originating transaction)', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</li>' . '</ul>' . '</p>' . '<p class="description">' . __( 'Integration-specific data tokens can also be used in the subject and message.', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>' . '<h4>' . __( 'Default subjects and messages', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</h4>' . '<p class="description">' . __( 'Administrator subject:', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>' . '<pre>' . htmlentities( Affiliates_Notifications::IXAP304, ENT_COMPAT, get_bloginfo( 'charset' ) ) . '</pre>' . '<p class="description">' . __( 'Administrator message:', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>' . '<pre>' . htmlentities( stripslashes( Affiliates_Notifications::IXAP306 ), ENT_COMPAT, get_bloginfo( 'charset' ) ) . '</pre>' . '<p class="description">' . __( 'Affiliate subject:', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>' . '<pre>' . htmlentities( Affiliates_Notifications::IXAP311, ENT_COMPAT, get_bloginfo( 'charset' ) ) . '</pre>' . '<p class="description">' . __( 'Affiliate message:', AFFILIATES_PRO_PLUGIN_DOMAIN ) . '</p>' . '<pre>' . htmlentities( stripslashes( Affiliates_Notifications::IXAP312 ), ENT_COMPAT, get_bloginfo( 'charset' ) ) . '</pre>' . '</div>' . self::get_help_tab_footer(); } private static function get_help_tab_footer() { return affiliates_help_tab_footer( false ); } } Affiliates_Admin_Menu_WordPress::init(); 